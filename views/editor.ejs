<% layout('layout/boilerplate') -%>
<link rel="stylesheet" href="/css/editor.css" />
<link rel="stylesheet" href="/css/previewSection.css" />

<div class="editor-container">
    <header class="editor-header flex flex-jc-sb flex-ai-c">
        <div class="flex flex-ai-c">
            <div class="hamburger-container flex flex-jc-c flex-ai-c">
                <img
                    class="hamburger-button"
                    src="/img/menu-burger.svg"
                    alt="menu-burger"
                />
            </div>
            <div class="logo-container flex flex-jc-c flex-ai-c">
                <img src="/img/logo-white.png" alt="logo" />
                <h1 class="logo-text">MARKDOWN</h1>
            </div>
            <div class="file-name-container flex flex-ai-c">
                <div class="flex flex-dir-col">
                    <p class="document-name-text">Document Name</p>
                    <p class="document-name"><%= data.name %></p>
                    <input
                        class="document-id"
                        type="hidden"
                        value="<%= data.id %>"
                    />
                </div>
            </div>
        </div>
        <div class="actions-container flex flex-ai-c">
            <a class="download-button flex flex-ai-c" href="#"
                ><img class="icon" src="/img/download.png" alt="download" />
                <span class="download-text">Download</span></a
            >
        </div>
    </header>
    <main class="editor-main flex">
        <div class="markdown-container section flex flex-dir-col">
            <div class="section-header flex flex-ai-c">
                <p>M A R K D O W N</p>
            </div>
            <% let n = data.markdown.length; %>
            <% let markdown = ""; %>
            <% for (let i = 0; i < n; i++) { %>
                <% let str = data.markdown[i]; %>
                <% if (i == n - 1) { %>
                    <% if (str !== "") { %>
                        <% markdown += str; %>
                    <% } %>
                <% } else { %>
                    <% if (str === "") { %> 
                        <% markdown += "\n\n"; %>
                    <% } else { %>
                        <% markdown += str; %>
                    <% } %>
                <% } %>
            <% } %>
            <textarea
                class="markdown-section vertical-scroll-bar"
                spellcheck="false"
            ><%= markdown %></textarea
            >
        </div>
        <div class="preview-container section flex flex-dir-col">
            <div class="section-header flex flex-ai-c">
                <p>P R E V I E W</p>
            </div>
            <div class="preview-section vertical-scroll-bar"></div>
        </div>
        <img
            class="eye-crossed eye-icon"
            src="/img/eye-crossed.svg"
            alt="eye-crossed"
        />
        <img class="eye eye-icon" src="/img/eye.svg" alt="eye" />
    </main>
    <div class="sliding-menu flex flex-dir-col">
        <div class="flex flex-ai-c flex-jc-sb">
            <img
                src="/img/logo-white.png"
                alt="logo"
                style="height: 1.5rem; margin-left: 1.25rem"
            />
            <div class="close-menu-button-container">
                <img
                    class="close-menu-button"
                    src="/img/cross.svg"
                    alt="cross"
                />
            </div>
        </div>
        <p class="sliding-menu-documents-text">Documents</p>
        <div class="document sliding-menu-tile readme-tile flex flex-ai-c">
            <img src="/img/hastag.svg" alt="hastag" />
            <p class="sliding-menu-tile-document-name">README</p>
            <input
                class="sliding-menu-readme-tile-document-id"
                type="hidden"
                value="6508a6469e54358420171e97"
            />
        </div>
        <div class="document-list-container vertical-scroll-bar"></div>
        <div
            class="create-new-document-container sliding-menu-tile flex flex-ai-c"
        >
            <img src="/img/plus.svg" alt="plus" />
            <input
                class="create-document-input"
                type="text"
                placeholder="Create new markdown"
            />
        </div>
        <div class="profile-container flex flex-dir-col flex-ai-c">
            <div class="document profile-item-container flex flex-ai-c">
                <img src="/img/mail.png" alt="trash">
                <p><%= email %></p>
            </div>
            <div class="profile-item-container flex flex-ai-c">
                <a class="document flex flex-ai-c" href="/accounts/delete">
                    <img src="/img/trash.svg" alt="trash">
                    <p>Delete Account!</p>
                </a>
            </div>
        </div>
        <div class="profile-options-container flex flex-jc-sb flex-ai-c">
            <img class="profile-button icon" src="/img/user.svg" alt="user" />
            <a href="/accounts/logout"
                ><img
                    class="logout-button icon"
                    src="/img/sign-out-alt.svg"
                    alt="sign-out-alt"
            /></a>
        </div>
    </div>
</div>

<script src="/js/fetchAPI.js"></script>
<script type="module" src="/js/editor.js"></script>
